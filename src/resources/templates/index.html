<!DOCTYPE html>
<html lang="en">

<head>

    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

    <meta name="description" content="TechWave">
    <meta name="author" content="Frenify">

    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

    <title>Alex</title>


    <script>
        if (!localStorage.frenify_skin) {
            localStorage.frenify_skin = 'dark';
        }
        if (!localStorage.frenify_panel) {
            localStorage.frenify_panel = '';
        }
        document.documentElement.setAttribute("data-techwave-skin", localStorage.frenify_skin);
        if (localStorage.frenify_panel !== '') {
            document.documentElement.classList.add(localStorage.frenify_panel);
        }

    </script>

    <link type="text/css" rel="stylesheet" href="{{ url_for('static', filename='style.css') }}" />

</head>

<body>


    <!-- Moving Submenu -->
    <div class="techwave_fn_fixedsub">
        <ul></ul>
    </div>
    <!-- !Moving Submenu -->

    <!-- Preloader -->
    <div class="techwave_fn_preloader">
        <svg>
            <circle class="first_circle" cx="50%" cy="50%" r="110"></circle>
            <circle class="second_circle" cx="50%" cy="50%" r="110"></circle>
        </svg>
    </div>
    <!-- !Preloader -->


    <!-- MAIN WRAPPER -->
    <div class="techwave_fn_wrapper fn__has_sidebar">
        <div class="techwave_fn_wrap">
            <!-- CONTENT -->
            <div class="techwave_fn_content">

                <!-- PAGE (all pages go inside this div) -->
                <div class="techwave_fn_page">

                    <!-- AI Chat Bot Page -->
                    <div class="techwave_fn_aichatbot_page fn__chatbot">

                        <div class="chat__page">
                            <div class="fn__title_holder">
                                <div class="container">
                                    <!-- Active chat title -->
                                    <h1 class="title">Chat With Alex</h1>
                                    <!-- !Active chat title -->
                                </div>
                            </div>

                            <div class="container">
                                <div class="chat__list">
                                    <div class="chat__item active" id="messages">

                                    </div>
                                    <div class="chat__item" id="voice">

                                    </div>
                                </div>
                            </div>


                            <div class="chat__comment">
                                <div class="container">
                                    <div class="fn__chat_comment">
                                        <textarea rows="1" placeholder="Send a message..."
                                            id="fn__chat_textarea"></textarea>
                                        <button id="send-button"><img
                                                src="{{ url_for('static', filename='enter.svg') }}" alt=""
                                                class="fn__svg"></button>
                                    </div>
                                </div>
                            </div>

                        </div>

                    </div>
                    <!-- !AI Chat Bot Page -->

                </div>
                <!-- !PAGE (all pages go inside this div) -->


                <!-- FOOTER (inside the content) -->
                <footer class="techwave_fn_footer">
                    <div class="techwave_fn_footer_content">
                        <div class="copyright">
                            <p>2023Â© Frenify Team</p>
                        </div>
                        <div class="menu_items">
                            <ul>
                                <li><a href="terms.html">Terms of Service</a></li>
                                <li><a href="privacy.html">Privacy Policy</a></li>
                            </ul>
                        </div>
                    </div>
                </footer>
                <!-- !FOOTER (inside the content) -->

            </div>
            <!-- !CONTENT -->


        </div>
    </div>
    <!-- !MAIN WRAPPER -->

    <script src="{{ url_for('static', filename='socket.io.js') }}"></script>
    <script>
        var socket = io();

        document.addEventListener("DOMContentLoaded", function () {
            var messageInput = document.getElementById("fn__chat_textarea");
            var sendButton = document.getElementById("send-button");

            sendButton.addEventListener("click", function () {
                send();
            });

            messageInput.addEventListener("keyup", function (e) {
                if (e.key === "Enter") {
                    send();
                }
            });

            socket.on("receive_message", function (data) {
                var messageElement = document.createElement("div");
                messageElement.innerHTML = `<div class="author"><span>Alex:</span></div>
                                            <div class="chat">
                                                <p>${data.message}</p>
                                            </div>`;
                messageElement.classList.add("bot__chat", "chat__box")

                document.getElementById("messages").appendChild(messageElement);
            });
        });

        function send() {
            var messageInput = document.getElementById("fn__chat_textarea");
            var sendButton = document.getElementById("send-button");

            var message = messageInput.value;
            var username = "Tiago Bernardo"; // Replace with actual username
            socket.emit("send_message", { message: message, username: username });
            var messageElement = document.createElement("div");
            messageElement.classList.add("chat__box", "your__chat")
            messageElement.innerHTML = `<div class="author"><span>You</span></div><div class="chat"><p>${message}</p></div>`;
            document.getElementById("messages").appendChild(messageElement);
            messageInput.value = "";
        }
    </script>


</body>

</html>
